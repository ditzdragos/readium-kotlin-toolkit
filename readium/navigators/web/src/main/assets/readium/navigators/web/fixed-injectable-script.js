!function(){"use strict";class e{constructor(e,t){console.log(`Constructing Gesturesdetector for window ${e}`),this.window=e,this.listener=t,document.addEventListener("click",(e=>{console.log("onClick"),this.onClick(e)}),!1)}onClick(e){if(e.defaultPrevented)return;const t=this.window.getSelection();if(t&&"Range"==t.type)return;let n;n=e.target instanceof HTMLElement?this.nearestInteractiveElement(e.target):null,n?n instanceof HTMLAnchorElement&&this.listener.onLinkActivated(n.href):(console.log("tap detected"),this.listener.onTap(e)),e.stopPropagation(),e.preventDefault()}nearestInteractiveElement(e){return null==e?null:-1!=["a","audio","button","canvas","details","input","label","option","select","submit","textarea","video"].indexOf(e.nodeName.toLowerCase())||e.hasAttribute("contenteditable")&&"false"!=e.getAttribute("contenteditable").toLowerCase()?e:e.parentElement?this.nearestInteractiveElement(e.parentElement):null}}window.addEventListener("message",(n=>{if(n.ports[0]){console.log("receiving port");const o=n.ports[0],s=new t(o);new e(window,s)}}));class t{constructor(e){this.messagePort=e}onTap(e){console.log("posting event");const t={x:e.clientX,y:e.clientY};this.messagePort.postMessage(t)}onLinkActivated(e){this.messagePort.postMessage({href:e})}}}();
//# sourceMappingURL=fixed-injectable-script.js.map